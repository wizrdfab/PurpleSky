----------------------------------------------------------------------
v2.0 (Live Trading V2 Module - Dec 2025)
----------------------------------------------------------------------
Agent: GPT-5 (Codex)
Date: 2025-12-31 15:19
Files Modified:
- live_trading_v2.py:1-1341 - Added robust live trading module with state, data aggregation, reconciliation, risk guards, and diagnostics
- ai-log.txt:1-17 - Added entry for live_trading_v2 creation

Original Intent: User requested a new live_trading_v2.py module with robust execution, recovery, diagnostics, and consistency safeguards while keeping strategy logic intact.

Changes Made:
1. Implemented a new live_trading_v2.py module with state persistence, trade/orderbook aggregation, model loading, and signal execution.
2. Added reconciliation, TP/SL handling, order timeouts, drawdown/data-lag guards, and heartbeat/drift reporting.
3. Added PnL mismatch detection and safety cancellation when positions are open or limits are breached.

Testing: Not tested (syntax check via AST parse only)
----------------------------------------------------------------------
v2.1 (Simulated Exchange Runner - Dec 2025)
----------------------------------------------------------------------
Agent: GPT-5 (Codex)
Date: 2025-12-31 15:59
Files Modified:
- simulated_exchange.py:1-599 - Added streaming simulated exchange with order/position/PnL handling and verbose status logging
- simulate_live_trading.py:1-243 - Added simulation runner with split/warmup logic, monkey patching, and verbose controls
- ai-log.txt:18-35 - Added entry for simulation modules

Original Intent: User requested a local simulated exchange that streams CSV trades and orderbook data to live_trading_v2 for backtest-consistent testing with warmup and last-15% split.

Changes Made:
1. Implemented SimulatedExchange with streaming trade/orderbook readers, order fills, TP/SL, and balance/position reporting.
2. Added simulate_live_trading.py to compute warmup/test split, patch time/ExchangeClient, and run live_trading_v2 against the simulator.
3. Added simulator verbosity options, periodic status output, and event logging for orders/positions.

Testing: Not tested (syntax check via AST parse only)
----------------------------------------------------------------------
v2.2 (Simulation State Guard - Dec 2025)
----------------------------------------------------------------------
Agent: GPT-5 (Codex)
Date: 2025-12-31 16:43
Files Modified:
- simulate_live_trading.py:6-286 - Added sim state handling, stale-state warning, dummy API keys, and wall-clock latency timing
- ai-log.txt:36-52 - Added entry for simulation fixes

Original Intent: User reported no positions and negative lag in the simulation output and asked for clearer, more reliable behavior.

Changes Made:
1. Added state-mode options with a sim-specific state file plus a stale-state warning to avoid skipping historical trades.
2. Injected dummy API keys during simulation to prevent unintended dry-run mode.
3. Patched SafeExchange latency timing to use wall-clock time so latency metrics stay readable under simulated time.

Testing: Not tested (not run)
----------------------------------------------------------------------
v2.5 (Keep Opposite Orders - Dec 2025)
----------------------------------------------------------------------
Agent: GPT-5 (Codex)
Date: 2025-12-31 17:39
Files Modified:
- simulated_exchange.py:458-473 - Keep remaining orders open after a fill to align with backtest behavior
- ai-log.txt:85-99 - Added entry for order retention change

Original Intent: User requested simulation to match backtest behavior by leaving orders open after a fill.

Changes Made:
1. Removed blanket order clearing on fill so opposite-side orders can remain active.

Testing: Not tested (not run)
----------------------------------------------------------------------
v2.3 (Orderbook Replay Fix - Dec 2025)
----------------------------------------------------------------------
Agent: GPT-5 (Codex)
Date: 2025-12-31 16:59
Files Modified:
- simulated_exchange.py:148-248 - Added snapshot+delta orderbook reconstruction to avoid invalid spreads
- ai-log.txt:53-68 - Added entry for orderbook replay fix

Original Intent: User reported spread anomalies and asked to verify orderbook replay accuracy in simulation.

Changes Made:
1. Rebuilt OrderbookStream to apply snapshots and deltas, maintaining full bid/ask state.
2. Emitted reconstructed books per timestamp to feed live_trading_v2 with realistic spreads.

Testing: Not tested (not run)
----------------------------------------------------------------------
v2.4 (Warmup File Filtering - Dec 2025)
----------------------------------------------------------------------
Agent: GPT-5 (Codex)
Date: 2025-12-31 17:19
Files Modified:
- simulated_exchange.py:6-383 - Added date-based file filtering and skip progress logs to speed warmup
- ai-log.txt:69-84 - Added entry for warmup file filtering

Original Intent: User reported simulation appearing stuck with large orderbook files.

Changes Made:
1. Filtered trade/orderbook files by start date to avoid parsing irrelevant days.
2. Added skip-to-time progress logs for trades and orderbook to show warmup progress.

Testing: Not tested (not run)
